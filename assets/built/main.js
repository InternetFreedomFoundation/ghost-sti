async function postFormDataAsJson({url:t,formData:n}){n=Object.fromEntries(n.entries()),n=JSON.stringify(n);const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:n});if(e.ok)return e.json();throw t=await e.text(),new Error(t)}async function handleFormSubmit(t){t.preventDefault();const n=t.currentTarget;t=n.action;try{await postFormDataAsJson({url:t,formData:new FormData(n)}),alert("Email Sent! Please check your inbox"),n.reset()}catch(t){alert("Something went wrong, Please try again later")}}$(function(){$("#petitionForm").submit(function(t){t.preventDefault();t={name:$("#nameField").val(),email:$("#emailField").val(),isIndividual:"individual"===$("#typeField").val(),organization:$("#organizationField").val()};$("#submitButton")[0].disabled=!0,$("#submitButton")[0].innerHTML="Submitting...",$.ajax({data:JSON.stringify(t),type:"POST",processData:!1,contentType:"application/json",url:"https://api.internetfreedom.in/dev/petition/submission"}).then(function(t){"ok"===t.status&&($("#submitButton")[0].disabled=!1,$("#submitButton")[0].innerHTML="Sign the petition",$("#successMessage").show())}).catch(function(t){$("#submitButton")[0].disabled=!0,$("#submitButton")[0].innerHTML="Sign the petition",$("#errorMessage").show()})})});const bsnlForm=document.getElementById("bsnl-form");bsnlForm.addEventListener("submit",handleFormSubmit);
//# sourceMappingURL=main.js.map