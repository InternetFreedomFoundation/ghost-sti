{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["$(function() {\n    $(\"#petitionForm\").submit(function(event) {\n        event.preventDefault();\n        var payload = {\n            name: $(\"#nameField\").val(),\n            email: $(\"#emailField\").val(),\n            isIndividual: $(\"#typeField\").val() === \"individual\" ? true : false,\n            organization: $(\"#organizationField\").val()\n        };\n        $(\"#submitButton\")[0].disabled = true;\n        $(\"#submitButton\")[0].innerHTML = \"Submitting...\";\n        $.ajax({\n            data: JSON.stringify(payload),\n            type: \"POST\",\n            processData: false,\n            contentType: \"application/json\",\n            url: \"https://api.internetfreedom.in/dev/petition/submission\"\n        }).then(function(response) {\n            if(response.status === \"ok\") {\n                $(\"#submitButton\")[0].disabled = false;\n                $(\"#submitButton\")[0].innerHTML = \"Sign the petition\";\n                $(\"#successMessage\").show();\n            }\n        }).catch(function(error) {\n            $(\"#submitButton\")[0].disabled = true;\n            $(\"#submitButton\")[0].innerHTML = \"Sign the petition\";\n            $(\"#errorMessage\").show();\n        })\n    });\n});\n/**\n * Helper function for POSTing data as JSON with fetch.\n *\n * @param {Object} options\n * @param {string} options.url - URL to POST data to\n * @param {FormData} options.formData - `FormData` instance\n * @return {Object} - Response body from URL that was POSTed to\n */\n async function postFormDataAsJson({ url, formData }) {\n\tconst plainFormData = Object.fromEntries(formData.entries());\n\tconst formDataJsonString = JSON.stringify(plainFormData);\n\n\tconst fetchOptions = {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAccept: \"application/json\",\n\t\t},\n\t\tbody: formDataJsonString,\n\t};\n\n\tconst response = await fetch(url, fetchOptions);\n\n\tif (!response.ok) {\n\t\tconst errorMessage = await response.text();\n\t\tthrow new Error(errorMessage);\n\t}\n\n\treturn response.json();\n}\n\n/**\n * Event handler for a form submit event.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event\n *\n * @param {SubmitEvent} event\n */\nasync function handleFormSubmit(event) {\n\tevent.preventDefault();\n\n\tconst form = event.currentTarget;\n\tconst url = form.action;\n\n\ttry {\n\t\tconst formData = new FormData(form);\n\t\tawait postFormDataAsJson({ url, formData });\n\n\t\talert('Email Sent! Please check your inbox');\n        form.reset()\n\t} catch (error) {\n\t\talert('Something went wrong, Please try again later');\n\t}\n}\n\nconst bsnlForm = document.getElementById(\"bsnl-form\");\nbsnlForm.addEventListener(\"submit\", handleFormSubmit);"],"names":["async","postFormDataAsJson","url","formData","plainFormData","Object","fromEntries","entries","formDataJsonString","JSON","stringify","response","fetch","method","headers","Content-Type","Accept","body","ok","json","errorMessage","text","Error","handleFormSubmit","event","preventDefault","form","currentTarget","action","FormData","alert","reset","error","$","submit","payload","name","val","email","isIndividual","organization","disabled","innerHTML","ajax","data","type","processData","contentType","then","status","show","catch","bsnlForm","document","getElementById","addEventListener"],"mappings":"AAsCCA,eAAeC,mBAAmB,CAAEC,IAAAA,EAAKC,SAAAA,IACnCC,EAAgBC,OAAOC,YAAYH,EAASI,WAC5CC,EAAqBC,KAAKC,UAAUN,GAW1C,MAAMO,QAAiBC,MAAMV,EATR,CACpBW,OAAQ,OACRC,QAAS,CACRC,eAAgB,mBAChBC,OAAQ,oBAETC,KAAMT,IAKP,GAAKG,EAASO,GAKd,OAAOP,EAASQ,OAHf,MADMC,QAAqBT,EAASU,OAC9B,IAAIC,MAAMF,GAalBpB,eAAeuB,iBAAiBC,GAC/BA,EAAMC,iBAEN,MAAMC,EAAOF,EAAMG,cACbzB,EAAMwB,EAAKE,OAEjB,UAEO3B,mBAAmB,CAAEC,IAAAA,EAAKC,SADf,IAAI0B,SAASH,KAG9BI,MAAM,uCACAJ,EAAKK,QACV,MAAOC,GACRF,MAAM,iDAjFRG,EAAE,WACEA,EAAE,iBAAiBC,OAAO,SAASV,GAC/BA,EAAMC,iBACFU,EAAU,CACVC,KAAMH,EAAE,cAAcI,MACtBC,MAAOL,EAAE,eAAeI,MACxBE,aAAwC,eAA1BN,EAAE,cAAcI,MAC9BG,aAAcP,EAAE,sBAAsBI,OAE1CJ,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,gBAClCT,EAAEU,KAAK,CACHC,KAAMnC,KAAKC,UAAUyB,GACrBU,KAAM,OACNC,aAAa,EACbC,YAAa,mBACb7C,IAAK,2DACN8C,KAAK,SAASrC,GACU,OAApBA,EAASsC,SACRhB,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,oBAClCT,EAAE,mBAAmBiB,UAE1BC,MAAM,SAASnB,GACdC,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,oBAClCT,EAAE,iBAAiBiB,aA2D/B,MAAME,SAAWC,SAASC,eAAe,aACzCF,SAASG,iBAAiB,SAAUhC"}