{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["$(function () {\n    $(\"#petitionForm\").submit(function (event) {\n        event.preventDefault();\n        var payload = {\n            name: $(\"#nameField\").val(),\n            email: $(\"#emailField\").val(),\n            isIndividual: $(\"#typeField\").val() === \"individual\" ? true : false,\n            organization: $(\"#organizationField\").val(),\n        };\n        $(\"#submitButton\")[0].disabled = true;\n        $(\"#submitButton\")[0].innerHTML = \"Submitting...\";\n        $.ajax({\n            data: JSON.stringify(payload),\n            type: \"POST\",\n            processData: false,\n            contentType: \"application/json\",\n            url: \"https://api.internetfreedom.in/dev/petition/submission\",\n        })\n            .then(function (response) {\n                if (response.status === \"ok\") {\n                    $(\"#submitButton\")[0].disabled = false;\n                    $(\"#submitButton\")[0].innerHTML = \"Sign the petition\";\n                    $(\"#successMessage\").show();\n                }\n            })\n            .catch(function (error) {\n                $(\"#submitButton\")[0].disabled = true;\n                $(\"#submitButton\")[0].innerHTML = \"Sign the petition\";\n                $(\"#errorMessage\").show();\n            });\n    });\n});\n/**\n * Helper function for POSTing data as JSON with fetch.\n *\n * @param {Object} options\n * @param {string} options.url - URL to POST data to\n * @param {FormData} options.formData - `FormData` instance\n * @return {Object} - Response body from URL that was POSTed to\n */\nasync function postFormData({ url, formData }) {\n\n    const fetchOptions = {\n        method: \"POST\",\n        body: formData,\n    };\n\n    const response = await fetch(url, fetchOptions);\n\n    if (!response.ok) {\n        const errorMessage = await response.text();\n        throw new Error(errorMessage);\n    }\n\n    const mailUrl = await response.text();\n    return mailUrl;\n}\n\n/**\n * Event handler for a form submit event.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event\n *\n * @param {SubmitEvent} event\n */\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    const url = form.action;\n\n    try {\n        const formData = new FormData(form);\n        encodedEmail= await postFormData({ url, formData });\n        window.open(encodedEmail);\n        form.reset();\n    } catch (error) {\n        alert(\"Something went wrong, Please try again later\");\n    }\n}\n\nconst bsnlForm = document.getElementById(\"bsnl-form\");\nbsnlForm.addEventListener(\"submit\", handleFormSubmit);\n"],"names":["async","postFormData","url","formData","response","fetch","method","body","ok","text","errorMessage","Error","handleFormSubmit","event","preventDefault","form","currentTarget","action","FormData","encodedEmail","window","open","reset","error","alert","$","submit","payload","name","val","email","isIndividual","organization","disabled","innerHTML","ajax","data","JSON","stringify","type","processData","contentType","then","status","show","catch","bsnlForm","document","getElementById","addEventListener"],"mappings":"AAwCAA,eAAeC,aAAa,CAAEC,IAAAA,EAAKC,SAAAA,IAO/B,MAAMC,QAAiBC,MAAMH,EALR,CACjBI,OAAQ,OACRC,KAAMJ,IAKV,GAAKC,EAASI,GAMd,aADsBJ,EAASK,OAH3B,MADMC,QAAqBN,EAASK,OAC9B,IAAIE,MAAMD,GAcxBV,eAAeY,iBAAiBC,GAC5BA,EAAMC,iBAEN,MAAMC,EAAOF,EAAMG,cACbd,EAAMa,EAAKE,OAEjB,IACI,IAAMd,EAAW,IAAIe,SAASH,GAC9BI,mBAAoBlB,aAAa,CAAEC,IAAAA,EAAKC,SAAAA,IACxCiB,OAAOC,KAAKF,cACZJ,EAAKO,QACP,MAAOC,GACLC,MAAM,iDA7EdC,EAAE,WACEA,EAAE,iBAAiBC,OAAO,SAAUb,GAChCA,EAAMC,iBACFa,EAAU,CACVC,KAAMH,EAAE,cAAcI,MACtBC,MAAOL,EAAE,eAAeI,MACxBE,aAAwC,eAA1BN,EAAE,cAAcI,MAC9BG,aAAcP,EAAE,sBAAsBI,OAE1CJ,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,gBAClCT,EAAEU,KAAK,CACHC,KAAMC,KAAKC,UAAUX,GACrBY,KAAM,OACNC,aAAa,EACbC,YAAa,mBACbvC,IAAK,2DAEJwC,KAAK,SAAUtC,GACY,OAApBA,EAASuC,SACTlB,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,oBAClCT,EAAE,mBAAmBmB,UAG5BC,MAAM,SAAUtB,GACbE,EAAE,iBAAiB,GAAGQ,UAAW,EACjCR,EAAE,iBAAiB,GAAGS,UAAY,oBAClCT,EAAE,iBAAiBmB,aAqDnC,MAAME,SAAWC,SAASC,eAAe,aACzCF,SAASG,iBAAiB,SAAUrC"}